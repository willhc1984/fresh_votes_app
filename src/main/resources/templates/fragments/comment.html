<html xmlns:th="http://thymeleaf.org">
  <body>
    <div th:fragment="commentThread" th:remove="tag">
      <div th:each="comment : ${thread}" style="margin-left: 1em">
        <span th:text="${comment.text}">Example comment</span>
        <div th:with="thread = ${comment.comments}"
               th:include="fragments/comment.html :: commentThread" th:remove="tag" ></div>
      </div>
    </div>
  </body>
</html>